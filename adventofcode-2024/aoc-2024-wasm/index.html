<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Advent of Code 2024 - WASM Solutions</title>
  <style>
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
      }

      .solution {
          margin: 20px 0;
          padding: 15px;
          border: 1px solid #ddd;
          border-radius: 4px;
      }

      .error {
          color: red;
          padding: 10px;
          border: 1px solid red;
          border-radius: 4px;
          margin: 10px 0;
      }
  </style>
</head>
<body>
<h1>Advent of Code 2024 Solutions</h1>

<div>
  <label for="day">Day:</label>
  <select id="day">
    <option value="01">Day 01</option>
    <option value="02">Day 02</option>
    <option value="03">Day 03</option>
    <option value="04">Day 04</option>
    <option value="05">Day 05</option>
    <option value="06">Day 06</option>
    <option value="07">Day 07</option>
    <option value="08">Day 08</option>
    <option value="09">Day 09</option>
    <option value="10">Day 10</option>
    <option value="11">Day 11</option>
    <option value="12">Day 12</option>
    <option value="13">Day 13</option>
    <option value="14">Day 14</option>
    <option value="15">Day 15</option>
    <option value="16">Day 16</option>
    <option value="17">Day 17</option>
    <option value="18">Day 18</option>
    <option value="19">Day 19</option>
    <option value="20">Day 20</option>
    <option value="21">Day 21</option>
    <option value="22">Day 22</option>
    <option value="23">Day 23</option>
    <option value="24">Day 24</option>
    <option value="25">Day 25</option>
    <!-- Add more days as needed -->
  </select>
</div>

<div style="margin: 20px 0;">
  <label for="input">Input:</label><br>
  <textarea id="input" rows="10" style="width: 100%"></textarea>
</div>

<button onclick="solve()">Solve</button>

<div id="solution" class="solution" style="display: none;">
  <h3>Solutions:</h3>
  <div>
    <strong>Part 1:</strong>
    <pre id="part1"></pre>
  </div>
  <div>
    <strong>Part 2:</strong>
    <pre id="part2"></pre>
  </div>
</div>

<script type="module">
  import init, {solve_day, init_panic_hook} from './pkg/aoc_2024_wasm.js';

  window.solve = async function () {
    try {
      const day = parseInt(document.getElementById('day').value);
      const input = document.getElementById('input').value;
      const parts = day === 25 ? [1] : [1, 2];

      // Since solve_day is synchronous, we can just map over the parts directly
      const results = parts.map(part => {
        try {
          const response = solve_day(day, part, input);
          return {
            part,
            result: response.result  // directly access the result property
          };
        } catch (error) {
          return {
            part,
            error: error.toString()
          };
        }
      });

      const solution = document.getElementById('solution');
      solution.style.display = 'block';

      // Handle Part 1
      const part1 = results.find(r => r.part === 1);
      document.getElementById('part1').textContent = part1?.error || part1?.result || 'Not computed';

      // Handle Part 2
      const part2 = results.find(r => r.part === 2);
      document.getElementById('part2').textContent = part2?.error || part2?.result || 'Not computed';


    } catch (e) {
      const errorDiv = document.createElement('div');
      errorDiv.className = 'error';
      errorDiv.textContent = e.toString();
      document.getElementById('solution').insertAdjacentElement('beforebegin', errorDiv);
    }
  }

  // Initialize the WASM module
  async function init_wasm() {
    await init();
    init_panic_hook();
  }

  init_wasm();
</script>
</body>
</html>


